---
import Layout from '../../layouts/Layout.astro';
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { id: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout title={`${post.data.title} - Dmytro Momot`} description={post.data.description}>
  <main class="container mx-auto px-4 py-16 max-w-4xl">
    <!-- Header Section -->
    <header class="mb-16 text-center max-w-3xl mx-auto">
      <div class="inline-block px-4 py-1 bg-zinc-900 dark:bg-zinc-100 text-zinc-100 dark:text-zinc-900 rounded-full text-xs font-semibold mb-6">
        {post.data.publishDate.toLocaleDateString('en-US', { 
          month: 'short', 
          day: 'numeric',
          year: 'numeric'
        })}
      </div>
      <h1 class="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-zinc-900 to-zinc-600 dark:from-zinc-100 dark:to-zinc-400 bg-clip-text text-transparent leading-tight pb-1">
        {post.data.title}
      </h1>
      <p class="text-lg text-zinc-600 dark:text-zinc-400">
        {post.data.description}
      </p>
    </header>

    <!-- Article Content -->
    <article class="prose-custom max-w-3xl mx-auto mb-12">
      <Content />
    </article>

    <!-- Tags Section -->
    <div class="max-w-3xl mx-auto border-t border-zinc-200 dark:border-zinc-700 pt-8 mb-12">
      <div class="flex gap-2 flex-wrap">
        {post.data.tags.map((tag) => (
          <a 
            href={`/blog/tag/${tag}`}
            class="text-sm px-4 py-2 bg-zinc-100 dark:bg-zinc-800 rounded-full hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors"
          >
            #{tag}
          </a>
        ))}
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex justify-center">
      <a 
        href="/blog" 
        class="group flex items-center gap-2 px-5 py-2.5 bg-zinc-100 dark:bg-zinc-800 rounded-lg hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all duration-200"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:-translate-x-1 transition-transform">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to all posts
      </a>
    </nav>
  </main>
</Layout>